import{d as I,u as N,r as g,a as c,c as T,b as u,e as L,f as s,w as a,E as S,_ as A,o as j,g as M,h,i as z,j as D,k as G,l as H,m as f,n as E,p as k,q as J,s as F,t as K,v as d,x as O}from"./index-Cq-zLFLx.js";/* empty css                    */import{_ as Q}from"./cute-5sQKAEaQ.js";const W={class:"login-container"},X={class:"login-card"},Y={class:"form-container"},Z=I({__name:"LoginView",setup($){const P=M(),V=N(),i=g(!1),_=g("login"),w=g(),l=c({username:"",password:""}),v=g(),r=c({username:"",password:"",confirmPassword:""}),R=c({username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度应为3-20个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:5,max:20,message:"密码长度应为5-20个字符",trigger:"blur"}]}),B=c({username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度应为3-20个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:5,max:20,message:"密码长度应为5-20个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(m,e,t)=>{e!==r.password?t(new Error("两次输入的密码不一致")):t()},trigger:"blur"}]}),U=async()=>{w.value&&await w.value.validate(async m=>{if(m){i.value=!0;try{await V.loginAction(l.username,l.password)?(d.success("登录成功"),P.push("/")):d.error("登录失败，请检查用户名和密码")}catch(e){console.error("登录失败:",e),d.error("登录失败，请稍后重试")}finally{i.value=!1}}})},q=async()=>{v.value&&await v.value.validate(async m=>{if(m){i.value=!0;try{await V.registerAction(r.username,r.password,r.confirmPassword)?(d.success("注册成功，请登录"),_.value="login",l.username=r.username,l.password="",r.username="",r.password="",r.confirmPassword=""):d.error("注册失败，用户名可能已存在")}catch(e){console.error("注册失败:",e),d.error("注册失败，请稍后重试")}finally{i.value=!1}}})};return(m,e)=>{const t=H,p=G,n=D,b=J,y=z,x=h,C=S;return j(),T("div",W,[u("div",X,[e[8]||(e[8]=L('<div class="card-decoration" data-v-45e7a009><img src="'+Q+'" class="decoration-image floating" alt="装饰" data-v-45e7a009></div><h2 class="login-title" data-v-45e7a009><span class="title-text" data-v-45e7a009>ByteVault</span><span class="subtitle" data-v-45e7a009>文件管理系统</span></h2>',2)),u("div",Y,[s(C,{modelValue:_.value,"onUpdate:modelValue":e[5]||(e[5]=o=>_.value=o),class:"login-tabs"},{default:a(()=>[s(x,{label:"登录",name:"login"},{default:a(()=>[s(y,{model:l,ref_key:"loginFormRef",ref:w,rules:R,class:"login-form"},{default:a(()=>[s(n,{prop:"username"},{default:a(()=>[s(p,{modelValue:l.username,"onUpdate:modelValue":e[0]||(e[0]=o=>l.username=o),placeholder:"用户名","prefix-icon":"el-icon-user"},{prefix:a(()=>[s(t,null,{default:a(()=>[s(f(E))]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(n,{prop:"password"},{default:a(()=>[s(p,{modelValue:l.password,"onUpdate:modelValue":e[1]||(e[1]=o=>l.password=o),type:"password",placeholder:"密码","show-password":""},{prefix:a(()=>[s(t,null,{default:a(()=>[s(f(k))]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(n,null,{default:a(()=>[s(b,{type:"primary",loading:i.value,onClick:U,class:"submit-btn wiggle"},{default:a(()=>e[6]||(e[6]=[F(" 登录 ")])),_:1,__:[6]},8,["loading"])]),_:1})]),_:1},8,["model","rules"])]),_:1}),s(x,{label:"注册",name:"register"},{default:a(()=>[s(y,{model:r,ref_key:"registerFormRef",ref:v,rules:B,class:"login-form"},{default:a(()=>[s(n,{prop:"username"},{default:a(()=>[s(p,{modelValue:r.username,"onUpdate:modelValue":e[2]||(e[2]=o=>r.username=o),placeholder:"用户名"},{prefix:a(()=>[s(t,null,{default:a(()=>[s(f(E))]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(n,{prop:"password"},{default:a(()=>[s(p,{modelValue:r.password,"onUpdate:modelValue":e[3]||(e[3]=o=>r.password=o),type:"password",placeholder:"密码","show-password":""},{prefix:a(()=>[s(t,null,{default:a(()=>[s(f(k))]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(n,{prop:"confirmPassword"},{default:a(()=>[s(p,{modelValue:r.confirmPassword,"onUpdate:modelValue":e[4]||(e[4]=o=>r.confirmPassword=o),type:"password",placeholder:"确认密码","show-password":""},{prefix:a(()=>[s(t,null,{default:a(()=>[s(f(K))]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(n,null,{default:a(()=>[s(b,{type:"primary",loading:i.value,onClick:q,class:"submit-btn wiggle"},{default:a(()=>e[7]||(e[7]=[F(" 注册 ")])),_:1,__:[7]},8,["loading"])]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1},8,["modelValue"])]),e[9]||(e[9]=u("div",{class:"login-footer"},[u("p",null,"欢迎使用ByteVault文件管理系统"),u("p",{class:"copyright"},"© 2024 ByteVault")],-1))]),e[10]||(e[10]=u("div",{class:"bottom-decoration"},[u("img",{src:A,class:"bottom-image",alt:"页脚装饰"})],-1))])}}}),re=O(Z,[["__scopeId","data-v-45e7a009"]]);export{re as default};
