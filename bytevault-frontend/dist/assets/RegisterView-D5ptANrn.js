import{d as b,r as p,a as x,c as y,b as t,f as s,w as o,i as k,o as E,j as R,k as P,q as B,s as m,y as F,z as q,v as g,g as C,x as h}from"./index-Cq-zLFLx.js";const I={class:"register-container"},N={class:"register-box"},U={class:"login-link"},z=b({__name:"RegisterView",setup(j){const c=C(),i=p(!1),d=p(),r=x({username:"",password:"",confirmPassword:""}),f={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:64,message:"用户名长度应在3到64个字符之间",trigger:"blur"},{pattern:/^[a-zA-Z0-9_-]+$/,message:"用户名只能包含字母、数字、下划线和连字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:5,max:64,message:"密码长度应在5到64个字符之间",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(u,e,l)=>{e!==r.password?l(new Error("两次输入的密码不一致")):l()},trigger:"blur"}]},_=async()=>{d.value&&await d.value.validate(async u=>{if(u)try{i.value=!0,await q(r.username,r.password,r.confirmPassword),g.success("注册成功，请登录"),c.push("/login")}catch(e){console.error("注册错误:",e),g.error(e.message||"注册失败，请稍后重试")}finally{i.value=!1}})};return(u,e)=>{const l=P,n=R,w=B,v=F("router-link"),V=k;return E(),y("div",I,[t("div",N,[e[6]||(e[6]=t("div",{class:"register-header"},[t("h2",null,"ByteVault"),t("p",null,"文件管理系统 - 用户注册")],-1)),s(V,{ref_key:"registerFormRef",ref:d,model:r,rules:f,"label-width":"0",class:"register-form"},{default:o(()=>[s(n,{prop:"username"},{default:o(()=>[s(l,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=a=>r.username=a),"prefix-icon":"el-icon-user",placeholder:"用户名",clearable:""},null,8,["modelValue"])]),_:1}),s(n,{prop:"password"},{default:o(()=>[s(l,{modelValue:r.password,"onUpdate:modelValue":e[1]||(e[1]=a=>r.password=a),"prefix-icon":"el-icon-lock",placeholder:"密码","show-password":"",clearable:""},null,8,["modelValue"])]),_:1}),s(n,{prop:"confirmPassword"},{default:o(()=>[s(l,{modelValue:r.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=a=>r.confirmPassword=a),"prefix-icon":"el-icon-lock",placeholder:"确认密码","show-password":"",clearable:""},null,8,["modelValue"])]),_:1}),s(n,null,{default:o(()=>[s(w,{type:"primary",loading:i.value,style:{width:"100%"},onClick:_},{default:o(()=>e[3]||(e[3]=[m(" 注册 ")])),_:1,__:[3]},8,["loading"])]),_:1}),t("div",U,[e[5]||(e[5]=m(" 已有账号？")),s(v,{to:"/login"},{default:o(()=>e[4]||(e[4]=[m("立即登录")])),_:1,__:[4]})])]),_:1},8,["model"])])])}}}),M=h(z,[["__scopeId","data-v-6d7bd849"]]);export{M as default};
